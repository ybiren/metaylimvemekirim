<div class="top-menu">
  @if (loggedInUser) {
    <div class="greeting">{{ loggedInUser.c_name }} 砖</div>
  }
  <nav>
    @if (loggedInUser) {
    <a routerLink="/register" routerLinkActive="active">
      注 驻专
    </a>
    <a routerLink="/search" [queryParams]=randomInit() routerLinkActive="active">驻砖 专</a>
    <a routerLink="/users" routerLinkActive="active"> 专</a>
    <div class="inbox" [class.open]="open" dir="rtl">
  <button class="inbox-btn" (click)="toggleInbox()" aria-label="驻转转 砖转">
    <span class="icon"></span>
    <span class="label">砖转</span>
    <span class="badge" *ngIf="unreadTotal > 0">{{ unreadTotal }}</span>
  </button>

  <div class="panel" *ngIf="open">
    <header class="panel-head">
      <strong>砖转</strong>
      <span class="muted" *ngIf="threads.length === 0"> 砖转</span>
    </header>

    <ul class="list">
      <li *ngFor="let t of threads" (click)="openChat(t.peerId)">
        <div class="row">
          <div class="avatar">
            <span class="dot" [class.online]="isOnline(t.peerId)"></span>
            <span class="letter">{{ (nameFor(t.peerId) | slice:0:1) }}</span>
          </div>
          <div class="meta">
            <div class="top">
              <span class="name">{{ nameFor(t.peerId) }}</span>
              <span class="time">{{ t.lastAt | date:'shortTime' }}</span>
            </div>
            <div class="bottom">
              <span class="preview">{{ t.lastPreview }}</span>
              <span class="unread" *ngIf="t.unread > 0">{{ t.unread }}</span>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>

    
    <!--<a routerLink="/likes" routerLinkActive="active">拽(0)</a>-->
    }
    <a (click)="logout()" class="logout">爪</a>
  </nav>
</div>
