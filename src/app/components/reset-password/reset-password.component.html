<section class="wrap" dir="rtl">
  <div class="card">
    <h1>איפוס סיסמה</h1>

    <p class="status error" *ngIf="error()">{{ error() }}</p>
    <p class="status ok" *ngIf="msg()">{{ msg() }}</p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="!error()">
      <label class="lbl">סיסמה חדשה</label>
      <input
        class="inp"
        type="password"
        formControlName="password"
        autocomplete="new-password"
        placeholder="הקלד סיסמה חדשה"
      />
      <div class="hint" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
        הסיסמה חייבת להיות לפחות 6 תווים
      </div>

      <label class="lbl">אימות סיסמה</label>
      <input
        class="inp"
        type="password"
        formControlName="confirm"
        autocomplete="new-password"
        placeholder="הקלד שוב את הסיסמה"
      />

      <div class="hint" *ngIf="form.touched && form.errors?.['passwordMismatch']">
        הסיסמאות לא תואמות
      </div>

      <button class="btn" type="submit" [disabled]="!canSubmit()">
        {{ loading() ? 'שומר...' : 'שמור סיסמה חדשה' }}
      </button>
    </form>

    <div class="small" *ngIf="userId() as uid">מזהה משתמש: {{ uid }}</div>
  </div>
</section>
